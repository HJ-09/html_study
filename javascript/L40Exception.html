<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>예외를 알고 처리하자</title>
</head>
<body>
    <h1>예외를 알고 처리하자</h1>

    <script>
        //코드를 잘못 쓰는 것은 예외가 아니고 그냥 오류임 ^^
        let a=10;
        //let a=20;
        //└─ 이런 식으로 코드를 잘못 선언하는걸 예외처리 할 수 있는 방법은 전혀 없음
        //┌─ 위에 오류가 있다면 이후 코드는 실행이 안됨.
        console.log('안녕~');

        /* java 에서는?!
        * int a=10;
        * int a=20;
        * ⇒ 컴파일 오류
        * └─ 오류가 있는 코드를 배포하는 것을 방지할 수 잇듬! 왜냐면, 오류가 있으면 class로 변환이 안되는데 배포는 class가 되는 것이기 때문에. 홀..!
        * */


        //┌─ 예외: 실행 도중에 발생한 오류
        //fetch('https://naver.com'); //CORS 오류가 뜸. 인터넷 상의 정책임

        /*let n=10; //Number
        console.log(n.toUpperCase()); //toUpperCase는 문자열 아이템(대문자로 변신)임. 고로, 오류가 뜬다는 말.
        console.log('안뇽'); //그럼 얘도 실행 x*/

        ///↓↓↓↓↓ 해결 렛츠-고
        let n=10;
        try{
            console.log(n.toUpperCase()); // 예외 잡고

        }catch (e) {
            console.log(e);
        }
            console.log('안뇽');


        try {
            let arr=new Array(-1);
            console.log(arr)
        }catch (e) {
            console.log(e.message)
        }

        //오류로 뜨는게 아닌 상태로 표시하는 경우(NaN, ...)
        console.log('십삼'*3); //NaN
        //└─ 이런 경우도 오류로 처리하면 너무 많아져서 그냥 상태(NaN)로 두는거임!
        let arr=[1,2,3]
        console.log(arr[3]); //undefined
        //배열의 길이를 벗어나는 것을 참조한다? ⇒ 오류(근데 undefined 상태)
        console.log(1/0); //Infinity /수학적 오류
        //-----> js는 인터프리터언어라서 오류를 상태로 표현하는 것 !

        /*let text='{"a":10}';
        //문자열로 객체를 표현한 JSON
        //다시 객체로 바꾸자
        console.log(JSON.parse(text)); //{a:10}*/

        ///일부러 오류내볼게~
        let text='{"a":10';
        try {
            console.log(JSON.parse(text));
        }catch (e) {
            console.log(e.message); //Expected ',' or '}' after property value in JSON at position 7 (line 1 column 8) ⇒ 오류 잡아내는 디테일 쩐당..
            console.log('제가 보이나요?')
        }finally {
            console.log('무조건 실행! JSON을 파싱할게욥')
        }

    </script>

</body>
</html>